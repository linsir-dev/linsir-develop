# 开源协议技术文档

## 文档列表

1. [说说常见的开源协议？](common-open-source-licenses.md)
2. [GPL协议、LGPL协议与BSD协议的法律区别？](gpl-lgpl-bsd-differences.md)
3. [MongoDB修改开源协议？](mongodb-license-change.md)

## 学习路径

### 初学者
1. 说说常见的开源协议？ → 了解开源协议的基本概念和分类
2. GPL协议、LGPL协议与BSD协议的法律区别？ → 深入理解常用开源协议的差异

### 进阶者
1. MongoDB修改开源协议？ → 了解开源协议的实际应用和影响
2. 研究其他开源协议的修改案例 → 了解开源协议的趋势

### 高级者
1. 深入理解所有开源协议的原理
2. 在实际项目中灵活应用开源协议
3. 能够根据实际情况选择合适的开源协议
4. 能够评估开源协议的法律风险和商业影响

## 核心概念

### 开源协议的定义

开源协议（Open Source License）是一种法律协议，用于规定开源软件的使用、修改、分发和再许可的权利和义务。开源协议确保了开源软件的自由性和开放性，同时也保护了原作者的权益。

### 开源协议的分类

#### 1. 宽松型协议（Permissive Licenses）

宽松型协议允许用户自由使用、修改、分发代码，甚至可以将代码用于商业软件中，而不必公开修改后的源代码。

**代表协议**：
- MIT License
- BSD License
- Apache License 2.0

**特点**：
- 极度宽松，几乎没有限制
- 允许商业使用
- 允许修改和分发
- 不要求公开修改后的源代码
- 只需要保留版权声明和许可声明

#### 2. 著佐权型协议（Copyleft Licenses）

著佐权型协议要求用户在分发修改后的代码时，必须以相同的协议开源，即"病毒式"传播开源协议。

**代表协议**：
- GPL（GNU General Public License）
- LGPL（GNU Lesser General Public License）
- AGPL（GNU Affero General Public License）
- MPL（Mozilla Public License）

**特点**：
- 强制开源，具有"病毒性"
- 允许商业使用
- 允许修改和分发
- 要求公开修改后的源代码
- 要求衍生作品使用相同协议

### 常见开源协议详解

#### 1. MIT License

**定义**：MIT License 是一种非常宽松的开源协议，由麻省理工学院（MIT）制定。

**特点**：
- 极度宽松，几乎没有限制
- 允许商业使用
- 允许修改和分发
- 不要求公开修改后的源代码
- 只需要保留版权声明和许可声明

**适用场景**：
- 希望最大化代码传播的项目
- 不介意代码被用于商业软件的项目
- 希望降低使用门槛的项目

**使用该协议的项目**：
- React
- Node.js
- jQuery
- .NET Core

#### 2. BSD License

**定义**：BSD License 是由加州大学伯克利分校制定的开源协议，有多个版本，最常用的是 2-Clause BSD（简化版）和 3-Clause BSD（新版）。

**特点**：
- 宽松程度仅次于 MIT
- 允许商业使用
- 允许修改和分发
- 不要求公开修改后的源代码
- 需要保留版权声明和许可声明
- 3-Clause BSD 包含"禁止背书"条款

**适用场景**：
- 希望保护原作者名誉的项目
- 不介意代码被用于商业软件的项目
- 需要一定法律保护的项目

**使用该协议的项目**：
- FreeBSD
- NetBSD
- Chromium（部分）
- nginx

#### 3. Apache License 2.0

**定义**：Apache License 2.0 是由 Apache 软件基金会制定的开源协议，它比 MIT 和 BSD 更为完善，提供了更详细的法律保护。

**特点**：
- 宽松程度与 MIT 相当
- 允许商业使用
- 允许修改和分发
- 不要求公开修改后的源代码
- 明确了专利授权
- 提供了专利反制条款

**适用场景**：
- 需要专利保护的项目
- 希望有完善法律保护的项目
- 大型企业项目

**使用该协议的项目**：
- Android
- Apache HTTP Server
- Kubernetes
- TensorFlow

#### 4. GPL（GNU General Public License）

**定义**：GPL 是由自由软件基金会（FSF）制定的开源协议，是最著名的著佐权型协议。GPL 要求任何基于 GPL 代码的衍生作品也必须以 GPL 协议开源。

**特点**：
- 强制开源，具有"病毒性"
- 允许商业使用
- 允许修改和分发
- 要求公开修改后的源代码
- 要求衍生作品使用相同协议

**版本**：
- GPL v1（1989年）
- GPL v2（1991年）
- GPL v3（2007年）

**适用场景**：
- 希望确保代码永远开源的项目
- 反对代码被用于商业软件的项目
- 自由软件运动支持者

**使用该协议的项目**：
- Linux Kernel
- GCC
- Git
- WordPress

#### 5. LGPL（GNU Lesser General Public License）

**定义**：LGPL 是 GPL 的一个变体，专门为库设计。它允许非 GPL 程序动态链接到 LGPL 库，而不必以 GPL 协议开源。

**特点**：
- 比 GPL 更宽松
- 允许商业使用
- 允许修改和分发
- 静态链接需要公开源代码
- 动态链接不需要公开源代码

**适用场景**：
- 希望被商业软件使用的库
- 需要一定开源要求的项目
- 希望平衡开源和商业利益的项目

**使用该协议的项目**：
- GNU C Library
- Qt（早期版本）
- FFmpeg

#### 6. MPL（Mozilla Public License）

**定义**：MPL 是由 Mozilla 基金会制定的开源协议，它是一种弱著佐权协议，介于宽松型和著佐权型之间。

**特点**：
- 中等严格程度
- 允许商业使用
- 允许修改和分发
- 修改的文件必须以 MPL 协议开源
- 未修改的文件可以保持原协议

**适用场景**：
- 希望平衡开源和商业利益的项目
- 需要灵活协议的项目
- 大型项目

**使用该协议的项目**：
- Firefox
- Thunderbird
- LibreOffice

#### 7. AGPL（GNU Affero General Public License）

**定义**：AGPL 是 GPL 的一个变体，专门针对网络服务。它要求通过网络提供服务的软件也必须公开源代码。

**特点**：
- 比 GPL 更严格
- 允许商业使用
- 允许修改和分发
- 要求通过网络提供服务时也公开源代码

**适用场景**：
- 网络服务
- SaaS 应用
- 希望防止"服务化"规避 GPL 的项目

**使用该协议的项目**：
- MongoDB（早期版本）
- Nextcloud
- ownCloud

#### 8. CC（Creative Commons）

**定义**：CC 是由知识共享组织制定的开源协议，主要用于创意作品，如图片、音乐、视频等。

**版本**：
- CC BY（署名）
- CC BY-SA（署名-相同方式共享）
- CC BY-ND（署名-禁止演绎）
- CC BY-NC（署名-非商业使用）
- CC BY-NC-SA（署名-非商业使用-相同方式共享）
- CC BY-NC-ND（署名-非商业使用-禁止演绎）
- CC0（公共领域）

**适用场景**：
- 创意作品
- 教育资源
- 科研数据

### 开源协议对比

#### 宽松型协议对比

| 协议 | 商业使用 | 修改 | 分发 | 闭源 | 专利授权 | 禁止背书 |
|------|----------|------|------|------|----------|
| MIT | ✓ | ✓ | ✓ | ✓ | ✗ |
| BSD 2-Clause | ✓ | ✓ | ✓ | ✓ | ✗ |
| BSD 3-Clause | ✓ | ✓ | ✓ | ✓ | ✓ |
| Apache 2.0 | ✓ | ✓ | ✓ | ✓ | ✗ |

#### 著佐权型协议对比

| 协议 | 商业使用 | 修改 | 分发 | 闭源 | 静态链接 | 动态链接 | 网络服务 |
|------|----------|------|------|------|----------|----------|----------|
| GPL | ✓ | ✓ | ✓ | ✗ | ✗ | ✗ |
| LGPL | ✓ | ✓ | ✓ | 部分 | ✗ | ✓ | ✗ |
| AGPL | ✓ | ✓ | ✓ | ✗ | ✗ | ✗ | ✗ |

### GPL、LGPL 与 BSD 的法律区别

#### 1. 著佐权（Copyleft）要求

**GPL**：
- 强著佐权：要求任何基于 GPL 代码的衍生作品也必须以 GPL 协议开源
- 病毒式传播：GPL 的开源要求会"传染"到所有衍生作品
- 全面开源：要求公开所有修改后的源代码

**LGPL**：
- 弱著佐权：允许非 LGPL 程序动态链接到 LGPL 库，而不必以 LGPL 协议开源
- 选择性开源：只有修改库本身时才需要以 LGPL 协议开源
- 灵活链接：静态链接需要公开源代码，动态链接不需要公开

**BSD**：
- 无著佐权：不要求衍生作品以相同协议开源
- 最大自由度：允许用户自由使用、修改、分发代码
- 宽松限制：只需要保留版权声明和许可声明

#### 2. 商业使用限制

**GPL**：
- 允许商业使用：GPL 允许商业使用，但必须开源
- 商业限制：不能将 GPL 代码用于商业闭源软件
- 双重许可：可以提供双重许可（商业许可 + GPL）

**LGPL**：
- 允许商业使用：LGPL 允许商业使用，有更灵活的限制
- 库友好：特别适合作为商业软件的库
- 动态链接：商业软件可以动态链接 LGPL 库而不必开源

**BSD**：
- 完全允许商业使用：BSD 完全允许商业使用，无开源要求
- 闭源许可：可以将 BSD 代码用于商业闭源软件
- 最大自由度：商业公司最喜欢使用的协议

#### 3. 源代码公开要求

**GPL**：
- 强制公开：任何修改后的代码必须公开
- 完整公开：必须公开所有修改后的源代码
- 持续公开：分发修改后的代码时必须公开

**LGPL**：
- 部分公开：修改库本身时需要公开，修改使用库的程序不需要公开
- 链接方式决定：静态链接需要公开，动态链接不需要公开
- 选择性公开：只有直接修改库时才需要公开

**BSD**：
- 无需公开：不要求公开修改后的源代码
- 完全自由：可以闭源分发修改后的代码
- 最低要求：只需要保留版权声明和许可声明

#### 4. 专利授权

**GPL**：
- 明确专利授权：GPL 明确授予了专利授权
- 专利反制：如果有人起诉专利侵权，GPL 许可自动终止
- 专利保护：保护用户免受专利诉讼

**LGPL**：
- 继承专利授权：LGPL 继承了 GPL 的专利授权
- 专利保护：同样保护用户免受专利诉讼
- 专利反制：同样有专利反制条款

**BSD**：
- 隐含专利授权：BSD 没有明确的专利授权条款
- 专利风险：可能存在专利风险
- 无专利反制：没有专利反制条款

### MongoDB 修改开源协议

#### MongoDB 开源协议的演变

**GNU AGPL v3.0 时期（2009-2018年）**：
- MongoDB 从 2009 年开始使用 GNU Affero General Public License v3.0（AGPL v3.0）作为开源协议
- AGPL v3.0 的特点：强著佐权、网络服务覆盖、商业友好、专利保护
- MongoDB 选择 AGPL v3.0 的原因：防止"服务化"规避、确保开源、社区贡献

**SSPL 时期（2018年至今）**：
- 2018 年 10 月，MongoDB 宣布将开源协议从 GNU AGPL v3.0 修改为 Server Side Public License (SSPL)
- SSPL 的特点：基于 AGPL v3.0、额外限制、服务提供商限制、非 OSI 认证
- SSPL 与 AGPL v3.0 的主要区别：OSI 认证、服务提供商限制、商业使用限制、云服务要求、社区接受度

#### MongoDB 修改开源协议的原因

**商业压力**：
- MongoDB Inc. 面临来自云服务提供商（如 AWS、Google Cloud、Microsoft Azure）的竞争压力
- 云服务的影响：免费使用、收入损失、不公平竞争

**保护商业模式**：
- MongoDB Inc. 希望保护其商业模式，特别是 MongoDB Atlas 云服务
- Atlas 服务：托管数据库、收入来源、竞争优势

**防止"免费搭车"**：
- MongoDB Inc. 希望防止云服务提供商"免费搭车"使用 MongoDB 的开源版本
- 免费搭车的影响：不公平竞争、收入转移、可持续发展

#### SSPL 协议的详细内容

**著佐权要求**：
- SSPL 继承了 AGPL v3.0 的著佐权要求，要求任何基于 SSPL 代码的衍生作品也必须以 SSPL 协议开源

**服务提供商限制**：
- SSPL 明确限制云服务提供商的使用，要求服务提供商必须获得 MongoDB Inc. 的商业许可

**商业使用限制**：
- SSPL 对商业使用有更严格的限制，特别是对云服务提供商

#### 对开源社区的影响

**社区反应**：
- 反对意见：违反开源精神、非 OSI 认证、社区分裂、信任危机
- 支持意见：保护商业模式、可持续发展、合理限制

**OSI 的立场**：
- OSI 的开源定义：自由再分发、自由使用、自由修改、自由分发衍生作品、无歧视性限制
- SSPL 不符合的原因：服务提供商限制、额外限制、非自由

#### 对 MongoDB 用户的影响

**现有用户**：
- AGPL v3.0 版本：继续使用、分支版本、长期支持
- SSPL 版本：新功能、官方支持、商业许可

**新用户**：
- 选择困难：协议选择、功能差异、长期风险
- 商业用户：商业许可、云服务、成本增加

#### 对开源协议的影响

**开源协议的趋势**：
- 商业化趋势：商业模式保护、双重许可、服务提供商限制
- 协议创新：新协议创建、协议修改、非 OSI 认证

**其他类似案例**：
- Elastic：Elasticsearch 和 Kibana 从 Apache 2.0 修改为 SSPL
- Redis：从 BSD 修改为 RSPL（Redis Source Available License）
- CockroachDB：从 Apache 2.0 修改为 CCL（CockroachDB Community License）

#### MongoDB 的后续发展

**技术发展**：
- 新功能：性能提升、新特性、云集成
- 社区贡献：继续接受社区贡献、开源版本、商业版本

**社区发展**：
- 官方社区：SSPL 社区、MongoDB Inc. 支持、商业用户
- 分支社区：AGPL v3.0 社区、社区支持、自由软件支持者
- 新项目：替代数据库、社区驱动、开源协议

## 如何选择开源协议

### 1. 考虑项目目标

- 希望最大化传播：选择 MIT 或 BSD
- 希望保护开源：选择 GPL
- 希望被商业软件使用：选择 LGPL 或 Apache 2.0
- 希望保护网络服务：选择 AGPL

### 2. 考虑法律保护

- 需要专利保护：选择 Apache 2.0
- 需要禁止背书：选择 BSD 3-Clause
- 需要防止服务化：选择 AGPL

### 3. 考虑社区接受度

- JavaScript 项目：通常选择 MIT
- Python 项目：通常选择 MIT 或 Apache 2.0
- Java 项目：通常选择 Apache 2.0
- Linux 项目：通常选择 GPL

## 开源协议的注意事项

### 1. 法律风险

- **GPL**：商业限制、许可证传染、版本不兼容
- **LGPL**：链接方式限制、部分开源要求、版本不兼容
- **BSD**：专利风险、无专利反制、责任限制

### 2. 商业影响

- **GPL**：不能将 GPL 代码用于商业闭源软件
- **LGPL**：静态链接需要公开源代码
- **BSD**：完全允许商业使用，无开源要求

### 3. 社区影响

- **协议选择**：影响社区参与度和贡献
- **商业限制**：可能影响社区的接受度
- **OSI 认证**：影响项目的可信度和使用

## 开源协议的最佳实践

### 1. 明确协议条款

在使用开源协议之前，需要仔细阅读和理解协议的条款，特别是：
- 著佐权要求
- 商业使用限制
- 源代码公开要求
- 专利授权条款

### 2. 选择合适的协议

根据项目的目标和需求，选择合适的开源协议：
- 希望最大化传播：选择宽松型协议
- 希望保护开源：选择著佐权型协议
- 希望平衡开源和商业：选择 LGPL 或 MPL

### 3. 保持协议一致性

在项目的整个生命周期中，保持协议的一致性：
- 不要随意更改协议
- 明确协议版本
- 提供清晰的许可证文件

### 4. 尊重原作者权益

在使用开源代码时，需要尊重原作者的权益：
- 保留版权声明
- 保留许可声明
- 遵守协议条款

## 参考资源

### 官方网站

- [Open Source Initiative (OSI)](https://opensource.org/)
- [Free Software Foundation (FSF)](https://www.fsf.org/)
- [Apache Software Foundation](https://www.apache.org/)
- [Mozilla Foundation](https://www.mozilla.org/)

### 协议文本

- [MIT License](https://opensource.org/licenses/MIT)
- [BSD License](https://opensource.org/licenses/BSD-3-Clause)
- [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0)
- [GPL v3](https://www.gnu.org/licenses/gpl-3.0.html)
- [LGPL v3](https://www.gnu.org/licenses/lgpl-3.0.html)
- [AGPL v3](https://www.gnu.org/licenses/agpl-3.0.html)
- [MPL 2.0](https://www.mozilla.org/en-US/MPL/2.0/)

### 在线工具

- [ChooseALicense](https://choosealicense.com/)
- [TLDRLegal](https://tldrlegal.com/)
- [SPDX License List](https://spdx.org/licenses/)

## 常见问题

### 1. 什么是开源协议？

开源协议是一种法律协议，用于规定开源软件的使用、修改、分发和再许可的权利和义务。

### 2. 什么时候使用开源协议？

当你发布开源软件时，需要选择一个开源协议来规定软件的使用、修改、分发和再许可的权利和义务。

### 3. 如何选择合适的开源协议？

根据项目的目标和需求，选择合适的开源协议。考虑因素包括：项目目标、法律保护、社区接受度等。

### 4. 开源协议可以修改吗？

开源协议可以修改，但需要遵守原协议的条款。修改后的协议需要明确标注。

### 5. 什么是著佐权（Copyleft）？

著佐权是一种版权许可方法，要求衍生作品必须以相同的协议开源，即"病毒式"传播开源协议。

### 6. 什么是 OSI 认证？

OSI（Open Source Initiative）认证是开源协议的标准认证，只有通过 OSI 认证的协议才能被称为"开源协议"。

### 7. 开源协议和商业软件可以共存吗？

可以，但需要遵守开源协议的条款。例如，GPL 要求商业使用时必须开源，而 BSD 允许商业使用时不必开源。

## 总结

开源协议是开源软件的法律基础，不同的开源协议有不同的特点和适用场景。宽松型协议（MIT、BSD、Apache 2.0）允许用户自由使用、修改、分发代码，甚至可以将代码用于商业软件中，而不必公开修改后的源代码。著佐权型协议（GPL、LGPL、AGPL）要求用户在分发修改后的代码时，必须以相同的协议开源，即"病毒式"传播开源协议。选择合适的开源协议需要考虑项目目标、法律保护和社区接受度等因素。MongoDB 修改开源协议从 GNU AGPL v3.0 到 Server Side Public License (SSPL) 是开源协议历史上的一个重要事件，反映了开源协议的趋势，越来越多的开源项目开始保护其商业模式。