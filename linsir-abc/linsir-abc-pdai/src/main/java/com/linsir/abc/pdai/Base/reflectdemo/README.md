# Java 反射示例

本目录包含 Java 反射的示例代码，展示了反射的核心功能和实际应用场景。

## 目录结构
```
reflectdemo/
├── User.java                // 反射操作的目标类
├── ReflectDemo.java         // 反射核心功能演示
├── DynamicProxyDemo.java    // 动态代理示例
└── README.md               // 本说明文件
```

## 示例代码功能

### 1. 目标类 (`User.java`)
- **字段**：
  - 公共字段 `name`
  - 私有字段 `age`
  - 受保护字段 `email`
  - 默认访问权限字段 `address`
- **构造方法**：
  - 无参构造方法
  - 有参构造方法
- **方法**：
  - 公共方法 `sayHello()` 和 `sayHello(String)`
  - 私有方法 `privateMethod()`
  - 受保护方法 `protectedMethod()`
  - 默认访问权限方法 `defaultMethod()`
- **使用场景**：
  - 作为反射操作的目标对象
  - 展示不同访问权限的成员

### 2. 反射核心功能演示 (`ReflectDemo.java`)
- **获取类信息**：
  - 获取类对象
  - 获取类的名称、包名等信息
- **构造方法操作**：
  - 获取构造方法
  - 通过构造方法创建对象实例
- **字段操作**：
  - 获取和修改公共字段
  - 获取和修改私有字段（通过设置可访问）
- **方法调用**：
  - 调用公共方法
  - 调用私有方法（通过设置可访问）
  - 调用带参数的方法
- **实际应用**：
  - 模拟依赖注入
  - 展示反射在框架中的应用

### 3. 动态代理示例 (`DynamicProxyDemo.java`)
- **接口定义**：
  - 定义 `Person` 接口
- **实现类**：
  - 创建 `RealPerson` 实现 `Person` 接口
- **动态代理**：
  - 创建 `PersonInvocationHandler` 实现 `InvocationHandler` 接口
  - 使用 `Proxy.newProxyInstance()` 创建动态代理对象
- **AOP 演示**：
  - 实现方法执行前后的增强
  - 展示反射在 AOP 中的应用

## Java 反射的核心概念

### 1. 什么是反射？
- 反射是 Java 语言的一种特性，允许程序在运行时：
  - 获取类的信息
  - 创建类的实例
  - 访问和修改类的字段
  - 调用类的方法
  - 即使这些信息在编译时是未知的

### 2. 反射的主要类
- **Class**：表示类的对象，是反射的核心
- **Constructor**：表示类的构造方法
- **Field**：表示类的字段
- **Method**：表示类的方法
- **Proxy**：用于创建动态代理
- **InvocationHandler**：处理动态代理的方法调用

### 3. 反射的优缺点

#### 优点
- **灵活性**：可以在运行时动态操作类和对象
- **可扩展性**：支持框架的开发，如 Spring、Hibernate 等
- **调试和测试**：便于编写通用的调试和测试工具

#### 缺点
- **性能开销**：反射操作比直接操作慢
- **安全性**：可能破坏封装性
- **代码可读性**：反射代码通常比直接代码更复杂

### 4. 反射的应用场景
- **框架开发**：如 Spring 的依赖注入、AOP
- **ORM 框架**：如 Hibernate、MyBatis
- **工具类**：如 JSON 序列化/反序列化
- **测试框架**：如 JUnit、Mockito
- **动态代理**：实现 AOP、事务管理等

## 运行示例

### 1. 运行 ReflectDemo
- 展示反射的核心功能
- 包括类信息获取、对象创建、字段操作、方法调用

### 2. 运行 DynamicProxyDemo
- 展示动态代理的实现
- 演示 AOP 的基本原理

## 注意事项
- 反射操作需要处理 `Exception`
- 访问私有成员时需要设置 `setAccessible(true)`
- 反射操作的性能开销较大，应避免在性能敏感的场景中频繁使用
- 反射可能破坏封装性，应谨慎使用
