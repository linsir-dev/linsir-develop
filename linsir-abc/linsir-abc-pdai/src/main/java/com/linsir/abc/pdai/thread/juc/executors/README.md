# JUC Executors 示例

本目录包含JUC（Java并发工具包）中Executors相关类的示例代码，演示了它们的基本用法和特征。

## Executors的特征

JUC框架下的Executors主要具有以下特征：

### 1. 线程池管理
- 提供了多种预配置的线程池实现
- 简化了线程池的创建和管理
- 支持线程池的生命周期管理

### 2. 任务调度
- 支持普通任务和定时任务的调度
- 提供了灵活的任务提交方式
- 支持任务的延迟执行和周期性执行

### 3. 异步执行
- 支持异步执行任务并获取结果
- 提供了Future和CompletableFuture等异步编程工具
- 简化了并发编程模型

### 4. 资源优化
- 通过线程池复用线程，减少线程创建和销毁的开销
- 提供了工作窃取等高级特性，提高线程利用率
- 支持自定义线程池参数，满足不同场景的需求

## 示例代码说明

### 1. FixedThreadPool
- **特征**：固定大小的线程池
- **适用场景**：需要控制并发度的场景
- **优势**：线程数量固定，资源使用可控

### 2. CachedThreadPool
- **特征**：可缓存的线程池，线程数量动态调整
- **适用场景**：短期任务较多的场景
- **优势**：线程自动回收，适合任务量波动较大的场景

### 3. SingleThreadExecutor
- **特征**：单线程的线程池
- **适用场景**：需要顺序执行任务的场景
- **优势**：任务顺序执行，避免并发问题

### 4. ScheduledThreadPool
- **特征**：支持定时任务的线程池
- **适用场景**：需要执行定时任务或周期性任务的场景
- **优势**：支持延迟执行和周期性执行

### 5. SingleThreadScheduledExecutor
- **特征**：单线程的定时任务线程池
- **适用场景**：需要顺序执行定时任务的场景
- **优势**：任务顺序执行，避免并发问题

### 6. WorkStealingPool
- **特征**：工作窃取线程池
- **适用场景**：任务执行时间差异较大的场景
- **优势**：线程利用率高，适合计算密集型任务

### 7. ThreadPoolExecutor自定义线程池
- **特征**：可完全自定义参数的线程池
- **适用场景**：需要精细控制线程池行为的场景
- **优势**：灵活性高，可根据具体需求配置

### 8. Future和Callable
- **特征**：支持获取任务执行结果
- **适用场景**：需要任务返回结果的场景
- **优势**：可以异步获取任务结果，支持异常处理

### 9. CompletableFuture
- **特征**：增强的Future，支持链式调用和组合操作
- **适用场景**：复杂的异步操作场景
- **优势**：API丰富，支持各种异步编程模式

### 10. 线程池性能测试
- **特征**：对比不同线程池的性能
- **适用场景**：选择合适的线程池时参考
- **优势**：直观展示各线程池的性能差异

## 运行示例

运行`ExecutorsDemo`类的`main`方法，即可看到各线程池的使用示例和输出结果。

## 线程池选择建议

1. **IO密集型任务**：
   - 选择CachedThreadPool或更大的FixedThreadPool
   - 线程数可以设置为CPU核心数的2-4倍

2. **计算密集型任务**：
   - 选择FixedThreadPool或WorkStealingPool
   - 线程数建议设置为CPU核心数或核心数+1

3. **定时任务**：
   - 选择ScheduledThreadPool
   - 根据任务数量和执行频率设置合适的线程数

4. **顺序执行任务**：
   - 选择SingleThreadExecutor或SingleThreadScheduledExecutor
   - 确保任务按顺序执行，避免并发问题

5. **特殊需求**：
   - 使用ThreadPoolExecutor自定义线程池
   - 根据具体场景配置核心参数

## 注意事项

1. **线程池关闭**：
   - 任务执行完成后，应调用`shutdown()`或`shutdownNow()`关闭线程池
   - 避免线程池资源泄漏

2. **任务提交**：
   - 对于可能抛出异常的任务，应进行适当的异常处理
   - 避免未捕获的异常导致线程终止

3. **线程池大小**：
   - 根据任务类型和系统资源合理设置线程池大小
   - 过大的线程池会导致上下文切换开销增加，过小会导致任务等待

4. **队列容量**：
   - 对于有界队列，应合理设置队列容量
   - 避免队列过大导致内存占用过高，或过小导致任务拒绝

5. **拒绝策略**：
   - 根据业务需求选择合适的拒绝策略
   - 避免任务被无声拒绝

通过合理使用Executors框架，可以大大简化并发编程，提高系统的性能和可靠性。
